# Changelog

*This changelog was generated by Claude Code, based on git history and actual code changes.*

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [v0.3.16](https://github.com/anydb-rs/anydb/releases/tag/v0.3.16) - 2025-11-09

### Changed
#### `rawdb`
- Renamed internal fields in `Regions` struct for clarity ([`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.16/crates/rawdb/src/regions.rs#L21-L22))
  - `index_to_region_file` → `file`
  - `index_to_region_file_len` → `file_len`
- Simplified `Regions::open()` path handling by accepting parent directory path and constructing regions file path internally ([`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.16/crates/rawdb/src/regions.rs#L26))

### Internal Changes
#### `rawdb`
- Converted example code to integration tests for better test coverage ([`tests/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.16/crates/rawdb/tests/mod.rs))

#### `vecdb`
- Removed unused `use allocative::Allocative;` imports from `Stamp` and `Version` modules
- Removed `#[allocative(skip)]` attributes from fields in lazy variant types (`LazyVecFrom1`, `LazyVecFrom2`, `LazyVecFrom3`) and `Pages` struct
- Converted example code to integration tests across multiple test modules (compressed, integrity, raw, rollback)

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.15...v0.3.16)

## [v0.3.15](https://github.com/anydb-rs/anydb/releases/tag/v0.3.15) - 2025-11-08

### New Features
#### `vecdb`
- Added `get_or_read_at_unwrap()` method for getting value from any layer at usize index using provided reader, panics on error ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.15/crates/vecdb/src/traits/generic.rs#L165-L167))
  - Complements existing `get_or_read_unwrap()` method by providing usize-specific version
  - Useful when working directly with usize indices and wanting panic-on-error semantics
- Added `get_or_read_at_unwrap_once()` method for getting value from any layer at usize index creating temporary reader, panics on error ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.15/crates/vecdb/src/traits/generic.rs#L172-L174))
  - One-shot variant of `get_or_read_at_unwrap()` that creates temporary reader
  - For multiple reads, prefer `get_or_read_at_unwrap()` with reused reader

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.14...v0.3.15)

## [v0.3.14](https://github.com/anydb-rs/anydb/releases/tag/v0.3.14) - 2025-11-08

### New Features
#### `vecdb`
- Added `get_at_or_default()` method to `VecIterator` trait for safely accessing iterator elements at usize index with default fallback ([`src/iterators/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.14/crates/vecdb/src/iterators/mod.rs#L31-L36))
  - Returns `Item::default()` if index not found instead of panicking
  - Useful for safe iteration when index may be out of bounds
- Added `get_or_default()` method to `ExtendedVecIterator` trait for safely accessing iterator elements at typed index with default fallback ([`src/iterators/extended.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.14/crates/vecdb/src/iterators/extended.rs#L34-L39))
  - Returns `Item::default()` if index not found instead of panicking
  - Works with typed indices (generic over index type)

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.13...v0.3.14)

## [v0.3.13](https://github.com/anydb-rs/anydb/releases/tag/v0.3.13) - 2025-11-08

### Breaking Changes
#### `vecdb`
- **Iterator method renamed for consistency**: `get_unwrap_at()` → `get_at_unwrap()` to match naming pattern where operation comes first (`get_at`), then modifier (`_unwrap`) ([`src/iterators/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.13/crates/vecdb/src/iterators/mod.rs#L25))
  - Aligns with other method naming like `read_at_unwrap()` for consistency across the API

### Changed
#### `rawdb`
- Added documentation comments for `flush()` and `compact()` methods ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.13/crates/rawdb/src/lib.rs))

### Internal Changes
#### `vecdb`
- Updated all `EagerVec` computation methods (rolling sum, window sum, sum across vecs, min/max across vecs, SMA, EMA, lag, diff, pct_change) to use `get_at_unwrap()` instead of `get_unwrap_at()`

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.12...v0.3.13)

## [v0.3.12](https://github.com/anydb-rs/anydb/releases/tag/v0.3.12) - 2025-11-08

### Breaking Changes
#### `vecdb`
- **Major API simplification by removing `_with` suffix**: Methods that accept a reader parameter no longer use `_with` suffix ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.12/crates/vecdb/src/traits/generic.rs))
  - `read_with()` → `read()` - reads value using provided reader
  - `get_or_read_with()` → `get_or_read()` - gets from any layer using provided reader
  - `get_pushed_or_read_with()` → `get_pushed_or_read()` - gets from pushed or storage using provided reader
  - `take_with()` → `take()` - removes and returns value using provided reader
- **New `_once` suffix for one-shot operations**: Methods that create temporary readers now use `_once` suffix ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.12/crates/vecdb/src/traits/generic.rs))
  - Old `read()` (one-shot) → `read_once()` - reads value creating temporary reader
  - Old `get_or_read()` (one-shot) → `get_or_read_once()` - gets from any layer creating temporary reader
  - Added `read_at_once()` - reads at usize index creating temporary reader
  - Added `get_or_read_at_once()` - gets at usize index creating temporary reader
  - Added `get_pushed_or_read_once()` - gets from pushed/storage creating temporary reader
  - Added `get_pushed_or_read_at_once()` - gets from pushed/storage at usize index creating temporary reader
  - Added `read_unwrap_once()` - reads value creating temporary reader, panics on error
  - Added `read_at_unwrap_once()` - reads at usize index creating temporary reader, panics on error

### Changed
#### `vecdb`
- Reorganized trait methods with section comments for better code organization: Reader Creation, Read Operations, Get or Read Operations, Pushed-only Operations ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.12/crates/vecdb/src/traits/generic.rs))
- Improved documentation for reader creation methods explaining deadlock prevention
- Enhanced method documentation explaining when to use reused readers vs temporary readers

### Internal Changes
#### `rawdb`
- Added documentation comments to error types, library functions, reader, and region structs

#### `vecdb`
- Added documentation comments across iterators, traits, variants, and utility modules
- Updated all examples (compressed, raw, integrity, rollback) to use new method names without `_with` suffix
- Updated all variant implementations to match new API

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.11...v0.3.12)

## [v0.3.11](https://github.com/anydb-rs/anydb/releases/tag/v0.3.11) - 2025-11-07

### New Features
#### `rawdb`
- Added `open_with_min_len()` method to allow specifying minimum file length when opening database ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.11/crates/rawdb/src/lib.rs#L54))
  - Enables preallocating database file to specific size on open
  - Existing `open()` method now calls `open_with_min_len(path, 0)` maintaining backward compatibility

### Changed
#### `rawdb`
- Generalized file initialization logic to support custom minimum lengths by changing condition from `if file_len == 0` to `if file_len < min_len` ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.11/crates/rawdb/src/lib.rs#L66-L69))
- Simplified `set_min_len()` implementation with early return pattern when file length already meets requirement ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.11/crates/rawdb/src/lib.rs#L99-L107))

### Bug Fixes
#### `rawdb`
- Fixed example code by adding missing `compact()` calls after region removal operations ([`examples/db.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.11/crates/rawdb/examples/db.rs))

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.10...v0.3.11)

## [v0.3.10](https://github.com/anydb-rs/anydb/releases/tag/v0.3.10) - 2025-11-06

### Bug Fixes
#### `rawdb`
- Improved database file initialization durability by adding `file.sync_all()` after setting file length for empty database files ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.10/crates/rawdb/src/lib.rs#L64))
  - Ensures file length change is persisted to disk before database operations begin
  - Prevents potential corruption if process crashes between file length change and natural sync

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.9...v0.3.10)

## [v0.3.9](https://github.com/anydb-rs/anydb/releases/tag/v0.3.9) - 2025-11-06

### Bug Fixes
#### `rawdb`
- Fixed database file initialization by automatically setting file length to PAGE_SIZE when opening empty (zero-length) database files ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.9/crates/rawdb/src/lib.rs#L61-L64))
  - Prevents potential errors from attempting to memory map zero-length files
  - Ensures proper initialization for newly created database files

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.8...v0.3.9)

## [v0.3.8](https://github.com/anydb-rs/anydb/releases/tag/v0.3.8) - 2025-11-06

### Breaking Changes
#### `vecdb`
- **VecIterator trait now requires ExactSizeIterator and FusedIterator**: Changed trait bounds from `VecIterator: Iterator` to `VecIterator: ExactSizeIterator + FusedIterator` ([`src/iterators/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.8/crates/vecdb/src/iterators/mod.rs#L11))
  - All iterator implementations must now implement `ExactSizeIterator`, providing accurate `len()` and size information
  - All iterator implementations must now implement `FusedIterator`, guaranteeing that once iterator returns `None`, it will always return `None` on subsequent calls
  - Enables better optimization opportunities and more predictable iterator behavior for users

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.7...v0.3.8)

## [v0.3.7](https://github.com/anydb-rs/anydb/releases/tag/v0.3.7) - 2025-11-06

### Breaking Changes
#### `vecdb`
- **Delete operation method renamed**: `take()` with reader parameter → `take_with()` to match naming convention where methods with `_with` suffix accept a reader ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L272))
- **Forced push API simplified**: `forced_push_at()` → `forced_push()` for generic index version, internal usize version remains `forced_push_at()` ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L201-L206))
- **Internal length method renamed for clarity**: `len_()` → `dirty_len()` to better indicate it returns stored + pushed length including dirty state ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L155))
- **Internal methods standardized with `_at` suffix**:
  - `has_()` → `has_at()` - checks if index exists in dirty state ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L367))
  - `update_()` → `update_at()` - updates value at usize index ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L309))
  - `truncate_if_needed_()` → `truncate_if_needed_at()` - truncates at usize index ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L379))
- **Clear method renamed**: `reset_()` → `clear()` for better semantic clarity - resets vector to empty state ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L334))
- **Read method name reordered for consistency**: `read_unwrap_at()` → `read_at_unwrap()` to match pattern where operation comes first, then modifier ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.7/crates/vecdb/src/traits/generic.rs#L54))

### Internal Changes
#### `vecdb`
- Updated all variant implementations (`RawVec`, `CompressedVec`, `EagerVec`) to use new method names
- Updated all `EagerVec` computation methods (map, filter, sum, min, max, SMA, EMA, diff, pct_change, CAGR) to use `forced_push()` instead of `forced_push_at()`
- Updated `RawVec` and `CompressedVec` `len()` implementations to call `dirty_len()` instead of `len_()`
- Updated rollback logic to use `update_at()` and `truncate_if_needed_at()` for internal operations
- Updated all examples (integrity, raw, rollback) to use `take_with()` instead of `take()`

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.6...v0.3.7)

## [v0.3.6](https://github.com/anydb-rs/anydb/releases/tag/v0.3.6) - 2025-11-06

### Breaking Changes
#### `vecdb`
- **Iterator trait methods renamed for clarity**: ([`src/iterators/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.6/crates/vecdb/src/iterators/mod.rs))
  - `set_position_()` → `set_position_to()` - sets iterator position to specific index
  - `set_end_()` → `set_end_to()` - sets iterator end position
  - `get_()` → `get_at()` - gets element at specific position by repositioning iterator
  - `unsafe_get_()` → `get_unwrap_at()` - gets element and unwraps result
  - `unsafe_get()` → `get_unwrap()` - generic index version of get and unwrap
- **Generic trait method terminology changed from "unchecked" to "unwrap"**: ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.6/crates/vecdb/src/traits/generic.rs))
  - `read_unchecked()` → `read_unwrap()` - reads value using provided reader, panics on error
  - `read_unchecked_at()` → `read_unwrap_at()` - reads value at usize index, panics on error
  - `get_or_read_unchecked()` → `get_or_read_unwrap()` - gets from any layer, panics on error

### Changed
#### `vecdb`
- Improved safety of `get_unwrap()` and `get_unwrap_at()` by replacing `unsafe { unwrap_unchecked() }` with regular `.unwrap()` ([`src/iterators/extended.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.6/crates/vecdb/src/iterators/extended.rs#L24), [`src/iterators/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.6/crates/vecdb/src/iterators/mod.rs#L20))

### Internal Changes
#### `vecdb`
- Updated all iterator implementations (raw clean/dirty, compressed clean/dirty, stored, computed, eager, lazy from1/from2/from3) to use new method names
- Updated all test cases to use renamed iterator methods (`set_position_to`, `set_end_to`)
- Updated internal variant code (`RawVec` serialize_changes) to use `read_unwrap_at()` instead of `read_unchecked_at()`

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.5...v0.3.6)

## [v0.3.5](https://github.com/anydb-rs/anydb/releases/tag/v0.3.5) - 2025-11-06

### Breaking Changes
#### `vecdb`
- **Read API renamed for consistency**: Multiple method renames to establish clear naming pattern ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.5/crates/vecdb/src/traits/generic.rs))
  - `unwrap_read()` → `read_unchecked()` - reads value with panic on error
  - `read()` with reader parameter → `read_with()` - reads value using provided reader
  - `read_()` → `read_at()` - internal implementation using usize index
  - Old `one_shot_read()` removed, new `read()` now creates temporary reader automatically
- **Get/read API renamed for consistency**:
  - `get_any_or_read()` with reader → `get_or_read_with()` - gets from any layer (updated/pushed/storage) using provided reader
  - Old `one_shot_get_any_or_read()` removed, new `get_or_read()` now creates temporary reader automatically
  - `get_any_or_read_()` → `get_or_read_at()` - internal implementation
- **Pushed-only API renamed**:
  - `get_pushed_or_read()` with reader → `get_pushed_or_read_with()` - gets from pushed or storage using provided reader
  - Old `one_shot_get_pushed_or_read()` removed, new `get_pushed_or_read()` now creates temporary reader automatically
  - `get_pushed_or_read_()` → `get_pushed_or_read_at()` - internal implementation
  - `get_pushed()` → `get_pushed_at()` - gets value from pushed layer only

### New Features
#### `vecdb`
- Added `read_unchecked()` and `read_unchecked_at()` convenience methods that panic on error instead of returning Result ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.5/crates/vecdb/src/traits/generic.rs#L47-L56))
- Added `get_or_read_unchecked()` convenience method that gets from any layer and panics on error ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.5/crates/vecdb/src/traits/generic.rs#L76-L78))

### Changed
#### `vecdb`
- **New naming convention established** across all read/get operations:
  - Methods without suffix (e.g., `read()`, `get_or_read()`) now create temporary readers for one-shot operations
  - Methods with `_with` suffix (e.g., `read_with()`) accept a reused reader parameter for better performance
  - Methods with `_at` suffix are internal implementations using usize indices
  - Methods with `_unchecked` suffix panic on errors instead of returning Result
- Improved `get_pushed_at()` safety by using `checked_sub()` to prevent integer underflow when calculating pushed layer offset ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.5/crates/vecdb/src/traits/generic.rs#L154))
- Improved `get_or_read_at()` logic by moving holes check to the beginning and reordering checks (holes → pushed → updated → storage) for better performance ([`src/traits/generic.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.5/crates/vecdb/src/traits/generic.rs#L96-L118))

### Internal Changes
#### `vecdb`
- Updated all variant implementations (`RawVec`, `CompressedVec`, `StoredVec`, `EagerVec`) to use new method names
- Updated all iterator implementations (raw and compressed dirty iterators) to use `get_pushed_at()` instead of `get_pushed()`
- Updated all examples (compressed, raw, integrity, rollback) and documentation to demonstrate new API usage

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.4...v0.3.5)

## [v0.3.4](https://github.com/anydb-rs/anydb/releases/tag/v0.3.4) - 2025-11-04

This release contains only workspace version number updates with no functional changes.

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.3...v0.3.4)

## [v0.3.3](https://github.com/anydb-rs/anydb/releases/tag/v0.3.3) - 2025-11-04

### Breaking Changes
#### `rawdb`
- **API method renamed**: `flush_then_punch()` renamed to `compact()` for clearer semantic meaning - update all call sites ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/lib.rs#L460))
- **Removed public method**: `punch_holes()` is now private (internal to `compact()`) - use `compact()` instead
- **Error type changes**: Replaced generic string errors with specific typed error variants - error handling code may need updates to match on new variants

### Added
#### `rawdb`
- **Pending holes mechanism for crash consistency**: Added `pending_holes` field to Layout struct preventing premature space reuse during copy-on-write operations ([`src/layout.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/layout.rs#L12-L13))
  - Holes from region moves and deletions marked as pending (not immediately reusable)
  - Only promoted to reusable holes after flush completes and metadata is durable
  - Prevents old region locations from being overwritten before metadata changes are persisted
  - Ensures crash-consistent copy-on-write behavior with proper write ordering
- **Hole promotion mechanism**: Added `promote_pending_holes()` method to safely convert pending holes to reusable holes after flush ([`src/layout.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/layout.rs#L203-L216))
  - Called automatically after metadata sync completes
  - Coalesces adjacent holes during promotion for space efficiency
- **Comprehensive typed error system**: Replaced generic string errors with detailed structured error variants ([`src/error.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/error.rs#L13-L48)):
  - `RegionNotFound` - region doesn't exist in database
  - `RegionAlreadyExists` - duplicate region ID on creation
  - `RegionStillReferenced { ref_count }` - cannot remove region with outstanding references
  - `WriteOutOfBounds { position, region_len }` - write position exceeds region length
  - `TruncateInvalid { from, current_len }` - invalid truncation parameters
  - `InvalidRegionId` - malformed region identifier
  - `InvalidMetadataSize { expected, actual }` - incorrect metadata buffer size
  - `EmptyMetadata` - zeroed/deleted region metadata detected
  - `RegionIndexMismatch` - layout inconsistency in region tracking
  - `HolePunchFailed { start, len, source }` - hole punching operation failed with context
- **Enhanced error messages**: Implemented descriptive Display trait providing detailed error context with relevant parameters ([`src/error.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/error.rs#L64-L107))

### Changed
#### `rawdb`
- **Deferred metadata writes for atomicity**: Removed all immediate `write_region_()` calls from write operations - metadata changes now tracked in-memory and batch-written during flush for atomic updates ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/lib.rs))
  - Write operations no longer write metadata immediately (was: wrote after each operation)
  - All metadata changes accumulate in-memory with dirty flag
  - Single atomic batch write during flush() ensures consistency
- **Enhanced flush semantics with write ordering**: Updated `flush()` to implement proper write ordering for crash consistency ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/lib.rs#L448-L457))
  1. Syncs mmap (data) first
  2. Writes and syncs dirty metadata
  3. Promotes pending holes to reusable holes
  - Guarantees metadata never points to unflushed data
  - Prevents premature reuse of old region locations
  - Provides crash-consistent copy-on-write operations
- **Improved write validation**: Enhanced write position validation with better error messages and explanatory comments about the len ≤ reserved invariant ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/lib.rs#L180-L190))
- **Improved truncate validation**: Enhanced truncation validation with typed `TruncateInvalid` error providing current length context ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/lib.rs#L350-L353))
- **Updated README description**: Changed from "Single-file, low-level and space efficient storage engine" to "Non-transactional embedded storage engine" for clearer positioning ([`README.md`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/README.md#L3))
- **Enhanced durability documentation**: Expanded README "Durability" section with comprehensive write ordering explanation ([`README.md`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/README.md#L59-L84)):
  - Added detailed 5-step write ordering process
  - Documented dirty tracking mechanism
  - Explained pending holes preventing premature reuse
  - Clarified crash-consistent COW behavior
  - Updated feature descriptions for accuracy
- **Region deletion uses pending holes**: Modified `remove_region()` to mark freed space as pending hole instead of immediately reusable hole ([`src/layout.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/src/layout.rs#L145-L152))

#### `vecdb`
- **Minor consistency improvements**: Small fixes in compressed pages and raw variant for better consistency

### Removed
#### `rawdb`
- **Removed allocative dependency**: Eliminated allocative and allocative_derive dependencies from rawdb, removing memory profiling overhead ([`Cargo.toml`](https://github.com/anydb-rs/anydb/blob/v0.3.3/crates/rawdb/Cargo.toml#L15))
  - Removed `Allocative` derive from `Layout` struct
  - Removed `Allocative` derive and skip attribute from `Database` struct
  - Reduced compilation dependencies and runtime overhead
- **Removed immediate metadata persistence**: Eliminated all inline metadata writes throughout write operations, replaced with deferred batch writes on flush

### Technical Implementation
- **Crash consistency through write ordering**: The pending holes mechanism ensures that:
  - Data is written and synced first via mmap
  - Metadata pointing to new locations is written and synced second
  - Old location space (pending holes) only becomes reusable third
  - Crash at any point leaves database in consistent state
- **Atomic metadata updates**: Batching metadata writes provides atomic updates - either all changes are persisted or none are, eliminating partial update inconsistencies
- **Type-safe error handling**: Structured error types with detailed context enable better error recovery and debugging compared to generic string errors
- **Memory efficiency**: Removed allocative dependency reduces binary size and eliminates runtime memory profiling overhead

### Performance Impact
- **Reduced write amplification**: Batching metadata writes reduces number of sync operations
- **Better space utilization**: Pending holes are properly coalesced during promotion
- **Faster error handling**: Typed errors avoid string allocations and formatting overhead
- **Smaller binary**: Removed allocative dependency reduces compilation time and binary size

### Migration Notes
- **Method rename**: Replace all `flush_then_punch()` calls with `compact()`
- **Remove punch_holes calls**: If calling `punch_holes()` directly, use `compact()` instead
- **Error handling**: Update error matching to handle new typed error variants instead of string matching
- **Durability semantics**: No visible behavior change, but operations are now guaranteed crash-consistent with proper write ordering

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.2...v0.3.3)

## [v0.3.2](https://github.com/anydb-rs/anydb/releases/tag/v0.3.2) - 2025-11-04

### Breaking Changes
#### `rawdb`
- **Region constructor signature change**: `Region::new()` now requires `id: String` as second parameter for explicit region identification ([`src/region.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/region.rs))
- **Metadata format change**: Region metadata entries expanded from 32 bytes to 4KB (PAGE_SIZE) for atomic write guarantees - existing databases must be recreated

### Added
#### `rawdb`
- **Atomic metadata writes**: Expanded metadata entry size from 32 bytes to 4KB (PAGE_SIZE) ensuring file system atomic write guarantees for crash consistency ([`src/region.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/region.rs#L32))
- **Embedded region IDs**: Added `id: String` field to `RegionMetadata` struct, storing region identifiers directly in metadata file and eliminating need for separate id_to_index file
- **Comprehensive ID validation**: Implemented validation in `RegionMetadata::new()` ensuring IDs are non-empty, <= 1024 bytes, and contain no control characters to prevent data corruption
- **Enhanced durability guarantees**: Added explicit directory sync operations in database and region initialization to ensure file system metadata persistence ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/lib.rs#L77), [`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/regions.rs#L44))
- **Comprehensive durability documentation**: Added detailed "Durability" section to README explaining flush requirements, atomic metadata design, single metadata file architecture, region write strategies, and recovery mechanism ([`README.md`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/README.md#L59-L75))

### Changed
#### `rawdb`
- **Upgraded metadata serialization**: Enhanced `to_bytes()` and `from_bytes()` methods to serialize IDs with length prefix and UTF-8 validation, detect zeroed/deleted entries, and require exactly PAGE_SIZE bytes ([`src/region.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/region.rs#L167-L201))
- **Simplified startup reconstruction**: Refactored `fill_index_to_region()` to scan all metadata slots sequentially, rebuilding both `id_to_index` HashMap and `index_to_region` Vec from single metadata file ([`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/regions.rs#L54-L76))
- **Region deletion marks metadata as deleted**: Modified `remove_region()` to write PAGE_SIZE zeros to metadata file, ensuring deleted regions won't be resurrected on restart ([`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/regions.rs#L153-L156))

### Removed
#### `rawdb`
- **Eliminated id_to_index file**: Removed separate id_to_index persistence file and all related infrastructure:
  - Removed `id_to_index_path` field from `Regions` struct
  - Removed `id_to_index_dirty` atomic flag tracking changes
  - Removed `serialize()` and `deserialize()` methods for HashMap persistence ([`src/regions.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.2/crates/rawdb/src/regions.rs))
  - Simplified `flush()` by removing id_to_index file write operation
  - Now rebuilds id_to_index mapping in memory on startup from metadata file
- **Code cleanup**: Removed obsolete imports including `std::io::{Cursor, Read}`, `Arc`, and atomic imports, plus commented-out id lookup methods

### Technical Implementation
- **Atomic write guarantees**: The 4KB metadata size leverages file system guarantees for atomic writes of page-aligned blocks, preventing partial metadata corruption during crashes
- **Single-file architecture**: Storing IDs in metadata eliminates the separate id_to_index file, reducing failure modes and simplifying recovery to a single sequential metadata scan
- **Efficient reconstruction**: On startup, reads metadata sequentially and rebuilds both the HashMap (for O(1) ID lookups) and Vec (for O(1) index lookups) data structures in a single pass
- **Deletion via zeroing**: Writing zeros to deleted region slots provides a clear "tombstone" marker that's detected during deserialization (zeroed entries fail validation)
- **ID validation layer**: Comprehensive validation at construction time prevents malformed IDs from corrupting the metadata file

### Performance Impact
- **Faster recovery**: Single metadata file scan on startup (no separate id_to_index file to load and deserialize)
- **Reduced I/O operations**: Eliminated separate file writes during flush operations
- **Better crash consistency**: Atomic metadata writes reduce window for corruption
- **Increased metadata overhead**: Each region metadata entry now uses 4KB instead of 32 bytes (trade-off for atomicity)

### Migration Notes
- **Database recreation required**: Existing databases using 32-byte metadata format cannot be read by v0.3.2+ and must be recreated
- **Region creation API**: Update all `Region::new()` calls to provide `id: String` as second parameter
- **Durability semantics**: Ensure `flush()` is called when durability is required; metadata is visible in memory but not guaranteed durable until flush

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.1...v0.3.2)

## [v0.3.1](https://github.com/anydb-rs/anydb/releases/tag/v0.3.1) - 2025-11-04

### Changed
#### `vecdb`
- **Completed error type naming consistency**: Renamed all `SeqDB` references in error handling to `RawDB`, completing the v0.3.0 crate rename transition ([`src/error.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.1/crates/vecdb/src/error.rs))
  - Error variant `Error::SeqDB` → `Error::RawDB` for consistent naming across the codebase
  - Updated `From<rawdb::Error>` trait implementation to construct `Self::RawDB`
  - Updated `Display` trait implementation to match on `Error::RawDB` for error formatting
- **Public API naming consistency**: Renamed exported error type from `SeqDBError` to `RawDBError` in public API, ensuring all user-facing types reflect the new rawdb naming ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.1/crates/vecdb/src/lib.rs#L10))

#### `workspace`
- **Enhanced documentation structure**: Restructured README.md with improved organization and clarity
  - Added proper "# anydb" heading establishing the workspace identity
  - Created "## Crates" section listing all available crates (rawdb, vecdb, vecdb_derive, vecdb_bench)
  - Added "## Resources" section with direct links to Changelog, License, and TODO documents
  - Updated all seqdb references to rawdb throughout documentation
- **Updated copyright notice**: Changed LICENSE.md copyright from "seqdb, vecdb" to "rawdb, vecdb" reflecting the current crate names
- **Streamlined development roadmap**: Cleaned up TODO.md by removing completed tasks and obsolete sections
  - Renamed "_SEQDB_" section to "_RAWDB_" for consistency
  - Removed completed tasks: identifier removal and region index storage optimization
  - Removed obsolete links and IO reference sections

### Technical Implementation
- **Consistent error handling**: All error type references now use the `RawDB` naming convention, eliminating any remaining `SeqDB` references from the v0.3.0 transition
- **Improved documentation discoverability**: The restructured README provides clearer navigation with dedicated sections for crates and resources, making it easier for users to find relevant documentation

### Migration Notes
- **Error type imports**: If importing error types directly, update `SeqDBError` to `RawDBError` in import statements: `use vecdb::RawDBError;`
- **Error pattern matching**: If pattern matching on vecdb errors, update `Error::SeqDB(e)` to `Error::RawDB(e)`

[View changes](https://github.com/anydb-rs/anydb/compare/v0.3.0...v0.3.1)

## [v0.3.0](https://github.com/anydb-rs/anydb/releases/tag/v0.3.0) - 2025-11-03

### Breaking Changes
#### `seqdb` → `rawdb`
- **Complete crate rename**: Renamed `seqdb` to `rawdb` throughout the entire codebase, reflecting the low-level nature of the storage engine as a foundation for higher-level abstractions
- **API namespace change**: All imports must change from `use seqdb::*` to `use rawdb::*`
- **Crate description updated**: Now described as "Single-file, low-level and space efficient storage engine with filesystem-like API"

#### `workspace`
- **Repository migration**: Moved repository from `seqdb/seqdb` to `anydb-rs/anydb`, reflecting the broader database ecosystem vision
- **Rust version requirement**: Added explicit rust-toolchain file requiring **Rust 1.91** minimum

#### `rawdb`
- **Removed mmap-based reader functionality**: Eliminated mmap reader in favor of more reliable direct file I/O patterns for certain operations
- **Simplified error types**: Removed `Error::ZeroCopy` variants and related zerocopy error conversions, streamlining error handling
- **Layout API change**: Internal `Layout` struct refactored from `start_to_index` to `start_to_region` for more direct region access

### Added
#### `vecdb_bench` (NEW CRATE)
- **Comprehensive benchmarking infrastructure**: Added new `vecdb_bench` crate with full database comparison suite ([`crates/vecdb_bench/`](https://github.com/anydb-rs/anydb/tree/v0.3.0/crates/vecdb_bench))
- **Multi-database benchmarks**: Implementations for RocksDB, LMDB, redb, fjall2, fjall3, and vecdb (both raw and compressed variants) ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb_bench/src/lib.rs))
- **Comprehensive test scenarios**: Sequential writes, sequential reads, random reads, and multi-threaded random read benchmarks ([`src/runner.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb_bench/src/runner.rs))

#### `vecdb`
- **Branch prediction hints**: Added performance optimization macros `likely()`, `unlikely()`, and `cold()` for better CPU branch prediction ([`src/lib.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/lib.rs#L39-L57))
- **New integrity test example**: Added comprehensive integrity testing example demonstrating data validation patterns ([`examples/integrity.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/examples/integrity.rs))
- **New rollback example**: Added detailed rollback demonstration with 888 lines showing time-travel capabilities ([`examples/rollback.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/examples/rollback.rs))
- **Dedicated iterator modules**: Created separate iterator implementations with clean/dirty state handling for compressed, raw, computed, stored, and lazy variants
- **Extended iterator utilities**: New `ExtendedIterableVec` trait with additional iterator methods ([`src/iterators/extended.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/iterators/extended.rs))

#### `rawdb`
- **Comprehensive test suite**: Added 1315+ lines of tests covering region management, layout operations, and edge cases ([`tests/mod.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/rawdb/tests/mod.rs))
- **Improved documentation**: Completely rewritten README with clearer API examples and usage patterns

#### `CI/CD`
- **GitHub Actions workflow**: Added automated build and test pipeline for continuous integration ([`.github/workflows/rust.yml`](https://github.com/anydb-rs/anydb/blob/v0.3.0/.github/workflows/rust.yml))

### Changed
#### `vecdb`
- **Major iterator performance improvements**: Complete refactoring of iterator implementation with separate clean and dirty iterators, resulting in dramatically faster iteration speeds
- **Iterator architecture overhaul**: Split monolithic iterator implementations into dedicated modules per variant:
  - Compressed: [`iterators/clean.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/variants/compressed/iterators/clean.rs), [`iterators/dirty.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/variants/compressed/iterators/dirty.rs)
  - Raw: [`iterators/clean.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/variants/raw/iterators/clean.rs), [`iterators/dirty.rs`](https://github.com/anydb-rs/anydb/blob/v0.3.0/crates/vecdb/src/variants/raw/iterators/dirty.rs)
  - Computed, Stored, and all Lazy variants with dedicated iterator modules
- **Removed mmap usage for iteration**: Transitioned from memory-mapped I/O to direct reads for better reliability and performance in certain workloads
- **Module reorganization**: Moved iterable trait from `traits/iterable.rs` to `iterators/iterable.rs` for better logical grouping
- **Lazy variant restructuring**: Reorganized lazy vector implementations from `lazy1/lazy2/lazy3` to `from1/from2/from3` with dedicated iterator modules
- **Eager variant file structure**: Split eager variant into modular structure with dedicated directory
- **Simplified examples**: Commented out embedded documentation examples in lib.rs for cleaner documentation generation

#### `rawdb`
- **Layout implementation refactored**: Simplified region tracking using direct `BTreeMap<u64, Region>` instead of index-based lookup, improving performance and code clarity
- **Region module complete rewrite**: Restructured region management with cleaner API and better encapsulation (178 lines)
- **Regions module complete rewrite**: Rebuilt regions collection management from scratch (253 lines)
- **Reader implementation simplified**: Streamlined reader implementation to 49 lines with clearer responsibilities

#### `workspace`
- **Removed build profiles**: Eliminated `profiling`, `dist`, and `clippy` profiles from root Cargo.toml for simpler configuration
- **Keywords updated**: Changed from `["vec", "disk", "data"]` to `["vec", "disk", "database"]` for better discoverability

### Removed
#### `vecdb`
- **Iterator trait module**: Removed `traits/iterator.rs` (103 lines) in favor of dedicated iterator implementations per variant

#### `rawdb`
- **Identifier module**: Removed unused `identifier.rs` (23 lines) simplifying the codebase

### Technical Implementation
- **Iterator performance optimization**: The new iterator architecture separates clean (no pending changes) and dirty (with pending changes) code paths, allowing for optimized hot paths without conditional overhead
- **Branch prediction hints**: The `likely()`, `unlikely()`, and `cold()` macros provide compiler hints for better CPU pipeline utilization in performance-critical code
- **Direct I/O patterns**: Moved away from mmap for certain operations after performance testing revealed limitations for sequential access patterns
- **Buffered reading**: Added `BUFFER_SIZE` constant (512 KiB) for optimized read operations
- **Modular architecture**: The split between clean and dirty iterators enables specialized optimizations for each case while maintaining code clarity

### Performance Impact
- **Dramatically faster iteration**: Major performance gains in vector iteration
- **Reduced branching overhead**: Separate clean/dirty iterator paths eliminate conditional checks in hot loops
- **Optimized memory access patterns**: Direct I/O with proper buffering replaced mmap for better sequential read performance
- **Better CPU utilization**: Branch prediction hints help modern CPUs optimize execution flow

### Migration Guide
To migrate from v0.2.x to v0.3.0:
1. **Update crate name**: Change `seqdb` to `rawdb` in Cargo.toml
2. **Update imports**: Replace `use seqdb::*` with `use rawdb::*`
3. **Update repository URL**: Change from `seqdb/seqdb` to `anydb-rs/anydb` in documentation/links
4. **Verify Rust version**: Ensure Rust 1.91 or later is installed
5. **Test thoroughly**: Major internal changes may surface edge cases in application code

[View changes](https://github.com/anydb-rs/anydb/compare/v0.2.17...v0.3.0)

## [v0.2.17](https://github.com/seqdb/seqdb/releases/tag/v0.2.17) - 2025-10-10

### Changed
#### `workspace`
- **Streamlined zerocopy dependency architecture**: Consolidated zerocopy integration by enabling the `zerocopy-derive` feature directly in the zerocopy dependency ([`Cargo.toml`](https://github.com/seqdb/seqdb/blob/v0.2.17/Cargo.toml#L38)), eliminating the need for a separate zerocopy-derive crate and simplifying the dependency graph

#### `seqdb`
- **Improved code clarity in region management**: Renamed `ids_to_remove` variable to `regions_to_remove` in [`retain_regions()` method](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/seqdb/src/lib.rs#L419) for better semantic meaning and clearer intent
- **Modernized zerocopy imports**: Updated import statement in [`region.rs`](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/seqdb/src/region.rs#L4) to use consolidated `zerocopy::{FromBytes, Immutable, IntoBytes, KnownLayout}` pattern instead of zerocopy_derive module

#### `vecdb`
- **Modernized zerocopy integration**: Updated import statements across multiple files to use consolidated zerocopy import pattern:
  - [`stamp.rs`](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/vecdb/src/stamp.rs#L2): Changed to `zerocopy::{FromBytes, Immutable, IntoBytes, KnownLayout}`
  - [`variants/compressed/page.rs`](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/vecdb/src/variants/compressed/page.rs#L2): Updated zerocopy imports
  - [`variants/raw/header.rs`](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/vecdb/src/variants/raw/header.rs#L6): Consolidated zerocopy trait imports
  - [`version.rs`](https://github.com/seqdb/seqdb/blob/v0.2.17/crates/vecdb/src/version.rs#L10): Updated to use unified zerocopy import

### Technical Implementation
- **Zerocopy consolidation benefits**: The new architecture leverages zerocopy's built-in derive feature instead of maintaining a separate derive crate dependency, reducing build complexity by eliminating one dependency from the compilation graph
- **Dependency management optimization**: Centralized zerocopy configuration in workspace Cargo.toml with `features = ["zerocopy-derive"]`, allowing all crates to inherit the streamlined setup without individual zerocopy-derive entries
- **Code organization improvement**: Variable renaming in `retain_regions()` makes the code's intent more explicit—these are region identifiers being removed, not arbitrary IDs

### Performance Impact
- **Reduced compilation overhead**: Consolidated zerocopy dependency reduces the number of crates to compile and simplifies dependency resolution during builds
- **Cleaner dependency tree**: One fewer crate in the dependency graph improves build cache efficiency and reduces potential version conflicts

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.16...v0.2.17)

## [v0.2.16](https://github.com/seqdb/seqdb/releases/tag/v0.2.16) - 2025-09-20

### Added
- **High-performance JSON serialization**: Integrated [`sonic-rs` library](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/Cargo.toml#L27) for ultra-fast JSON operations, providing significant performance improvements over standard JSON serialization
- **Comprehensive JSON collection methods**: Added new methods to [`CollectableVec` trait](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/traits/collectable.rs) for efficient JSON data extraction:
  - [`collect_json_bytes()`](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/traits/collectable.rs#L46-L54) - serializes vector data directly to JSON bytes using sonic-rs
  - [`collect_range_json_bytes()`](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/traits/collectable.rs#L56-L70) - serializes a specified range to JSON bytes with bounds checking
  - [`collect_json_string()`](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/traits/collectable.rs#L72-L80) - converts vector data to JSON string format
  - [`collect_range_json_string()`](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/traits/collectable.rs#L82-L96) - converts a range to JSON string with proper validation
- **Enhanced error handling**: Added [`Error::Sonic` variant](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/src/error.rs#L19) with comprehensive sonic-rs error integration including proper error conversion and display formatting

### Changed
- **Dependency updates**: Updated serde ecosystem dependencies for improved stability and performance:
  - serde: 1.0.219 → 1.0.225
  - serde_derive: 1.0.219 → 1.0.225
  - serde_json: 1.0.143 → 1.0.145
- **Cleaner configuration**: Removed commented-out feature definitions from [`vecdb Cargo.toml`](https://github.com/seqdb/seqdb/blob/v0.2.16/crates/vecdb/Cargo.toml#L14-L18) for better maintainability

### Technical Implementation
- **Ultra-fast JSON processing**: sonic-rs provides:
  - SIMD-accelerated JSON parsing and serialization
  - Zero-copy string handling where possible
  - Significantly faster performance compared to serde_json for large datasets
  - Full compatibility with serde ecosystem while offering performance improvements
- **Memory-efficient JSON collection**: The new collection methods:
  - Use sonic-rs for optimal serialization performance
  - Provide both byte-level and string-level JSON output options
  - Include proper range validation with early bounds checking
  - Support efficient iteration over vector data with minimal memory overhead
- **Robust error propagation**: Enhanced error handling ensures proper error context preservation from sonic-rs operations through the entire vecdb error chain

### Performance Impact
- **JSON serialization speed**: sonic-rs typically provides 2-5x faster JSON serialization compared to serde_json
- **Reduced memory allocation**: More efficient memory usage during JSON operations through zero-copy optimizations
- **SIMD utilization**: Automatic SIMD instruction usage on supported hardware for maximum throughput

### Dependencies
- **New core dependency**: Added sonic-rs 0.3.0 for high-performance JSON operations
- **Transitive dependencies**: Added supporting libraries including faststr, rkyv, and various optimization crates
- Updated all workspace package versions from 0.2.15 to 0.2.16 across seqdb, vecdb, and vecdb_derive crates

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.15...v0.2.16)

## [v0.2.15](https://github.com/seqdb/seqdb/releases/tag/v0.2.15) - 2025-09-20

### Changed
- **Modernized arithmetic validation**: Replaced modulo operator assertions with [`is_multiple_of()` method](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/seqdb/src/lib.rs#L551-L552) throughout the codebase for improved readability and modern Rust idioms
- **Enhanced days validation logic**: Improved [`yearly returns validation`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/vecdb/src/variants/eager.rs#L1257-L1259) to properly handle zero days case alongside existing 365-day multiple requirement
- **Simplified compression processing**: Removed parallel processing from [`CompressedVec flush operation`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/vecdb/src/variants/compressed/mod.rs#L309-L313), switching from `into_par_iter()` to sequential processing for reduced complexity

### Removed
- **Unused dependency cleanup**: Removed `allocative_derive` dependency from seqdb crate and both `allocative_derive` and `rayon` dependencies from vecdb crate, reducing compilation overhead
- **Eliminated redundant imports**: Removed unused `rayon::prelude::*` import from compressed vector implementation

### Technical Implementation
- **Assertion modernization**: Updated alignment and size validation across multiple modules:
  - [`PAGE_SIZE alignment checks`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/seqdb/src/lib.rs#L551-L552) in memory mapping operations
  - [`Region validation`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/seqdb/src/region.rs#L23-L25) for start position, reserved space, and size constraints
  - [`Raw vector size validation`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/vecdb/src/variants/raw/mod.rs#L109) for proper element alignment
- **Enhanced edge case handling**: Days validation now prevents both zero-day configurations and non-365-day-multiple configurations, ensuring valid yearly calculation parameters
- **Build system optimization**: Added [`cargo-machete metadata`](https://github.com/seqdb/seqdb/blob/v0.2.15/crates/seqdb/Cargo.toml#L27-L28) to exclude intentionally unused `log` dependency from cleanup tools

### Performance Impact
- **Reduced parallel overhead**: Sequential compression processing eliminates rayon thread pool overhead for smaller datasets while maintaining the same compression functionality
- **Faster compilation**: Removing unused dependencies reduces build time and improves development iteration speed
- **Cleaner dependency tree**: Simplified dependency graph reduces potential version conflicts and maintenance burden

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.14...v0.2.15)

## [v0.2.14](https://github.com/seqdb/seqdb/releases/tag/v0.2.14) - 2025-09-13

### Changed
- **Simplified multiplication method signature**: Streamlined [`compute_multiply()` method](https://github.com/seqdb/seqdb/blob/v0.2.14/crates/vecdb/src/variants/eager.rs#L370-L382) in EagerVec by eliminating the intermediate generic type parameter `T4`, reducing type complexity while maintaining the same computational functionality
- **Enhanced type conversion efficiency**: Optimized multiplication computation by using direct `T::from(v.into_owned())` conversion and removing unnecessary `result.into()` call, improving performance and code clarity

### Technical Implementation
- **Simplified generic constraints**: The multiplication method now uses more direct type constraints:
  - Removed intermediate `T4` type parameter that was only used for temporary storage
  - Simplified from `T2: StoredRaw + Mul<T3, Output = T4>, T4: StoredRaw, T: From<T4>` to `T2: StoredRaw, T3: StoredRaw, T: From<T2> + Mul<T3, Output = T>`
  - Enabled direct computation flow without intermediate type conversions
- **Performance optimization**: Eliminated redundant type conversions in the multiplication loop, reducing computational overhead and memory allocations

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.13...v0.2.14)

## [v0.2.13](https://github.com/seqdb/seqdb/releases/tag/v0.2.13) - 2025-09-11

### Added
- **All-time low computation**: Added [`compute_all_time_low()` method](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs#L314-L325) for tracking minimum values across the entire dataset history
- **Advanced windowed aggregations**: Implemented windowed statistical functions:
  - [`compute_max()`](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs#L697-L742) for sliding window maximum calculation
  - [`compute_min()`](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs#L744-L789) for sliding window minimum calculation
- **Flexible default value handling**: Added [`compute_all_time_low_()` private method](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs#L327-L368) with `exclude_default` parameter for sophisticated default value exclusion logic
- **Enhanced development tooling**: Added [`clippy` profile](https://github.com/seqdb/seqdb/blob/v0.2.13/Cargo.toml#L26-L27) inheriting from dev profile for consistent linting configuration

### Changed
- **Improved method naming consistency**: Renamed [`compute_max()` to `compute_all_time_high()`](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs#L278) for better clarity and semantic meaning, distinguishing it from the new windowed max function
- **Enhanced error handling infrastructure**: Added `core::error` import to EagerVec for improved error handling capabilities

### Technical Implementation
- **Sliding window algorithm**: The windowed aggregation functions implement efficient sliding window computation:
  - Use `VecDeque` for optimal O(1) front/back operations in window management
  - Intelligent window initialization starting from `index - window` offset for proper context
  - Memory-efficient window maintenance with automatic front element removal
  - Support for variable window sizes with proper boundary handling
- **All-time tracking logic**: The all-time low computation features:
  - Sophisticated previous value initialization from either current vector state or source data
  - Flexible default value exclusion with fallback to max value when excluding defaults
  - Comprehensive version validation ensuring data consistency across computations
- **Performance optimizations**: Enhanced computational methods with optimized iteration patterns and minimal memory allocation

### Files Modified
- [Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.2.13/Cargo.toml): Added clippy profile and updated dependency versions
- [crates/vecdb/src/variants/eager.rs](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/vecdb/src/variants/eager.rs): Added all-time low computation, windowed aggregations, and renamed compute_max to compute_all_time_high
- [Multiple Cargo.toml files](https://github.com/seqdb/seqdb/blob/v0.2.13/crates/): Updated individual dependency versions across workspace members

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.11...v0.2.13)

## [v0.2.11](https://github.com/seqdb/seqdb/releases/tag/v0.2.11) - 2025-09-07

### Added
- **Memory profiling infrastructure**: Integrated [allocative](https://crates.io/crates/allocative) crate for comprehensive memory usage tracking and analysis across all core data structures
- **Comprehensive memory attribution**: Added `Allocative` derive to all major types including:
  - [`Database` and `DatabaseInner`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/seqdb/src/lib.rs#L40-L56) for tracking database-level memory usage
  - [`Layout`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/seqdb/src/layout.rs#L7) for region layout memory tracking
  - [`Region` and `Regions`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/seqdb/src/region.rs#L7) for region metadata memory analysis
  - [`Stamp`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/stamp.rs#L17) for timestamp memory footprint
  - All vector variants and their internal structures for comprehensive vector memory profiling
- **Centralized computation validation**: Added [`validate_computed_version_or_reset()` method](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/traits/generic.rs#L280-L297) to Generic trait for consistent computed vector validation logic
- **Enhanced logging infrastructure**: Added informational logging for computation start events and vector resets using the `log` crate

### Changed
- **Simplified computational method signatures**: Major refactoring of EagerVec computational methods:
  - [`compute_divide()`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/variants/eager.rs#L344-L370) - Simplified generic constraints and eliminated intermediate types
  - [`compute_percentage()`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/variants/eager.rs#L372-L385) - Streamlined type requirements and direct computation flow
  - [`compute_percentage_difference()`](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/variants/eager.rs#L387-L400) - Unified approach with other percentage methods
- **Improved computational logic organization**: Refactored computation validation by moving shared validation logic from individual EagerVec methods to centralized Generic trait implementation
- **Enhanced memory footprint management**: Added selective memory tracking with `#[allocative(skip)]` attributes for non-owned resources like file handles and memory maps

### Technical Implementation
- **Memory tracking architecture**: The allocative integration provides:
  - Accurate memory usage reporting for all heap-allocated structures
  - Selective tracking with skip attributes for external resources (files, memory maps)
  - Support for parking_lot synchronization primitives through feature flags
  - Comprehensive coverage from database-level down to individual vector elements
- **Computation validation consolidation**: The new `validate_computed_version_or_reset()` method:
  - Centralizes version checking logic across all computed vector types
  - Provides consistent reset behavior when version mismatches occur
  - Adds informational logging for computation start events
  - Reduces code duplication across different computation methods
- **Type system simplification**: Computational methods now use more direct type constraints, eliminating complex intermediate type parameters while maintaining the same functionality

### Dependencies
- **New dependencies**: Added allocative 0.3.4 and allocative_derive 0.3.3 for memory profiling capabilities
- **Enhanced features**: Enabled parking_lot support in allocative for accurate synchronization primitive tracking
- Updated all workspace package versions from 0.2.9 to 0.2.11 across seqdb, vecdb, and vecdb_derive crates

### Files Modified
- [Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.2.11/Cargo.toml): Added allocative dependencies to workspace
- [crates/seqdb/](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/seqdb/): Added Allocative derives to all core types and selective skip attributes
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/traits/generic.rs#L280-L297): Added centralized computation validation
- [crates/vecdb/src/variants/](https://github.com/seqdb/seqdb/blob/v0.2.11/crates/vecdb/src/variants/): Added Allocative derives and simplified computation methods across all variants

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.9...v0.2.11)

## [v0.2.9](https://github.com/seqdb/seqdb/releases/tag/v0.2.9) - 2025-09-03

### Added
- **Region retention functionality**: Added [`retain_regions()` method](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/seqdb/src/lib.rs#L415-L429) to Database for bulk region cleanup, allowing retention of only specified regions while removing all others
- **Region name enumeration**: Added [`region_names()` method](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/traits/any.rs#L25) to AnyVec trait for listing all regions associated with a vector, enabling comprehensive resource management
- **Enhanced debugging support**: Added debug inspection in [`create_reader()` method](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/traits/generic.rs#L48-L50) to help diagnose region reader creation failures

### Changed
- **Consistent region naming**: Refactored region naming logic to use centralized [`_TO_` constant](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/traits/any.rs#L12) across all vector variants, ensuring consistent naming patterns and easier maintenance
- **Improved import organization**: Enhanced import statements in lazy vector variants to include `AnyBoxedIterableVec` for better trait organization and consistency

### Technical Implementation
- **Bulk region management**: The `retain_regions()` method efficiently processes region sets by:
  - Using `HashSet` for O(1) lookup performance during filtering
  - Collecting regions to remove before iteration to avoid borrow checker conflicts
  - Processing deletions in batch for optimal performance
- **Universal region enumeration**: Each vector variant now implements `region_names()` returning appropriate region collections:
  - **RawVec**: Returns single region name from `index_to_name()`
  - **CompressedVec**: Returns both base and pages regions
  - **ComputedVec**: Delegates to underlying vector implementation
  - **EagerVec**: Delegates to wrapped vector implementation
  - **StoredVec**: Delegates based on variant type
  - **LazyVec variants**: Return empty collections as they don't own regions
- **Centralized naming conventions**: All region naming now uses the `_TO_` constant for consistent separator usage across the codebase

### Dependencies
- Updated all workspace package versions from 0.2.6 to 0.2.9 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/seqdb/src/lib.rs](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/seqdb/src/lib.rs#L415-L429): Added retain_regions method and HashSet import
- [crates/vecdb/src/traits/any.rs](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/traits/any.rs#L12-L25): Added _TO_ constant and region_names method
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/traits/generic.rs): Updated region naming to use _TO_ constant and added debug support
- [All vector variants](https://github.com/seqdb/seqdb/blob/v0.2.9/crates/vecdb/src/variants/): Implemented region_names() method for each variant

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.6...v0.2.9)

## [v0.2.6](https://github.com/seqdb/seqdb/releases/tag/v0.2.6) - 2025-09-02

### Changed
- **Improved multiplication variable clarity**: Enhanced [`compute_multiply()` method](https://github.com/seqdb/seqdb/blob/v0.2.6/crates/vecdb/src/variants/eager.rs#L357-L361) in EagerVec to use more descriptive variable names (`multiplied` and `multiplier`) instead of generic `v`, improving code readability and maintainability
- **Cleaned up debug output**: Commented out debug statements in [RawVec implementation](https://github.com/seqdb/seqdb/blob/v0.2.6/crates/vecdb/src/variants/raw/mod.rs#L318-L321) to reduce console noise during normal operations while preserving debugging infrastructure for development

### Technical Implementation
- **Enhanced code clarity**: The multiplication operation now clearly separates the multiplicand (`multiplied`) from the multiplier (`multiplier`) values, making the mathematical operation more explicit and easier to follow
- **Preserved debugging capability**: Debug statements remain in the codebase as comments, allowing for easy re-activation during debugging sessions without requiring code reconstruction

### Dependencies
- Updated all workspace package versions from 0.2.5 to 0.2.6 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/vecdb/src/variants/eager.rs](https://github.com/seqdb/seqdb/blob/v0.2.6/crates/vecdb/src/variants/eager.rs#L357-L361): Improved variable naming in compute_multiply method
- [crates/vecdb/src/variants/raw/mod.rs](https://github.com/seqdb/seqdb/blob/v0.2.6/crates/vecdb/src/variants/raw/mod.rs#L318-L321): Commented out debug output statements

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.5...v0.2.6)

## [v0.2.5](https://github.com/seqdb/seqdb/releases/tag/v0.2.5) - 2025-08-26

### Added
- **Previous state tracking system**: Implemented comprehensive historical state tracking with new methods:
  - [`prev_pushed()` and `mut_prev_pushed()`](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L111-L112) for tracking previous pushed data
  - [`prev_holes()` and `mut_prev_holes()`](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L207-L208) for tracking previous hole positions
  - [`prev_updated()` and `mut_prev_updated()`](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L238-L239) for tracking previous updates
  - [`prev_stored_len()` and `mut_prev_stored_len()`](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L290-L291) for tracking previous stored length
- **Enhanced state access in get operations**: Added [`prev_updated` lookup](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L96-L101) in `get_or_read_()` method to check previous updates before falling back to disk reads
- **Comprehensive debugging capabilities**: Added extensive debug output throughout [raw example](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/examples/raw.rs) to demonstrate state tracking across all operations and rollback scenarios

### Changed
- **Major rollback deserialization overhaul**: Completely refactored [`deserialize_then_undo_changes()` method](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs#L321) with sophisticated binary format parsing:
  - Enhanced to handle previous state restoration with separate `prev_stored_len`, `stored_len`, and comprehensive state reconstruction
  - Improved truncated data handling with proper pushed data management and previous state preservation
  - Added complex state coordination between current and previous data structures
- **Enhanced example demonstrations**: Significantly expanded [raw example](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/examples/raw.rs) with detailed debugging scenarios showcasing the new state tracking capabilities through multiple complex rollback and state management operations

### Technical Implementation
- **Sophisticated binary deserialization**: The enhanced deserialization now handles:
  - Previous stamp restoration with proper timestamp management
  - Dual stored length tracking (`prev_stored_len` and `stored_len`) for accurate state reconstruction
  - Complex pushed data reconstruction from serialized previous and current states
  - Previous state restoration for pushed data, holes, and updates with proper binary format parsing
  - Coordinated state management ensuring consistency between previous and current states
- **Multi-layered state tracking**: Implemented complete historical state preservation allowing vectors to maintain references to both current and previous states for sophisticated rollback and debugging capabilities
- **Enhanced debugging infrastructure**: Added comprehensive debug output patterns throughout examples to demonstrate state tracking capabilities and facilitate development debugging

### Performance Implications
- **Memory usage increase**: Previous state tracking requires additional memory to maintain historical state snapshots
- **Enhanced rollback accuracy**: More precise rollback operations due to comprehensive state preservation
- **Improved development experience**: Extensive debugging capabilities aid in understanding vector state transitions

### Dependencies
- Updated all workspace package versions from 0.2.4 to 0.2.5 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/src/traits/generic.rs): Comprehensive previous state tracking system and enhanced rollback deserialization
- [crates/vecdb/examples/raw.rs](https://github.com/seqdb/seqdb/blob/v0.2.5/crates/vecdb/examples/raw.rs): Extensive debugging demonstrations and complex state management scenarios

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.4...v0.2.5)

## [v0.2.4](https://github.com/seqdb/seqdb/releases/tag/v0.2.4) - 2025-08-19

### Changed
- **Enhanced truncation functionality**: Completely refactored [`truncate_if_needed_()` method](https://github.com/seqdb/seqdb/blob/v0.2.4/crates/vecdb/src/traits/generic.rs#L277-L311) in Generic trait to allow truncation even with pending changes, holes, or updates, enabling more flexible vector state management
- **Intelligent data cleanup during truncation**: Enhanced truncation logic to automatically clean up holes and updates that would be affected by the truncation, maintaining data consistency while allowing operations previously blocked by the clean state requirement
- **Improved rollback validation**: Added [`stamp comparison check`](https://github.com/seqdb/seqdb/blob/v0.2.4/crates/vecdb/src/traits/generic.rs#L443-L445) in `rollback_before()` method to prevent unnecessary rollback operations when the current stamp is already earlier than the target stamp

### Removed
- **Simplified RawVec implementation**: Removed redundant [`truncate_if_needed()` override](https://github.com/seqdb/seqdb/blob/v0.2.4/crates/vecdb/src/variants/raw/mod.rs#L436-L447) from RawVec variant, allowing it to inherit the improved generic implementation and reducing code duplication

### Technical Implementation
- **Smart truncation logic**: The enhanced truncation method now:
  - Calculates total vector length including both stored and pushed data (`len = stored_len + pushed_len`)
  - Returns early if truncation index is beyond current length (no-op case)
  - Automatically filters holes to remove entries beyond truncation point using `retain(|&i| i < index)`
  - Cleans up updates affecting indices beyond truncation using `retain(|&i, _| i < index)`
  - Handles pushed data truncation intelligently - clearing all pushed data if truncating within stored range, or partially truncating pushed data if truncating within pushed range
- **Optimized rollback efficiency**: Added early exit condition in `rollback_before()` to avoid unnecessary file system operations when the target stamp is already in the future relative to current vector state

### Breaking Changes
- **Truncation behavior**: `truncate_if_needed_()` no longer requires vectors to be in a clean/flushed state before truncation, potentially changing behavior for code that relied on the previous strict validation

### Dependencies
- Updated all workspace package versions from 0.2.3 to 0.2.4 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.4/crates/vecdb/src/traits/generic.rs#L277-L311): Enhanced truncation functionality and rollback validation
- [crates/vecdb/src/variants/raw/mod.rs](https://github.com/seqdb/seqdb/blob/v0.2.4/crates/vecdb/src/variants/raw/mod.rs): Removed redundant truncate_if_needed() override

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.3...v0.2.4)

## [v0.2.3](https://github.com/seqdb/seqdb/releases/tag/v0.2.3) - 2025-08-18

### Changed
- **Simplified FreeBSD API**: Renamed [`punch_hole2()` to `punch_hole()`](https://github.com/seqdb/seqdb/blob/v0.2.3/crates/seqdb/src/lib.rs#L626) in seqdb for FreeBSD platform, unifying the hole punching interface across all supported platforms for cleaner code organization and consistency

### Technical Implementation
- **Unified hole punching interface**: Consolidated FreeBSD-specific hole punching implementation to use the standard `punch_hole()` function name, eliminating the need for platform-specific function names while maintaining the same `fspacectl` system call functionality
- **Cross-platform code simplification**: Reduced API surface complexity by standardizing function names across Linux, macOS, and FreeBSD platforms, making the codebase more maintainable and reducing conditional compilation complexity

### Dependencies
- Updated all workspace package versions from 0.2.2 to 0.2.3 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/seqdb/src/lib.rs](https://github.com/seqdb/seqdb/blob/v0.2.3/crates/seqdb/src/lib.rs#L626): Renamed punch_hole2() to punch_hole() for FreeBSD platform

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.2...v0.2.3)

## [v0.2.2](https://github.com/seqdb/seqdb/releases/tag/v0.2.2) - 2025-08-18

### Added
- **Advanced rollback functionality**: Added [`rollback_before(stamp)` method](https://github.com/seqdb/seqdb/blob/v0.2.2/crates/vecdb/src/traits/generic.rs#L425-L451) in Generic trait with sophisticated file system-based rollback logic for rolling back to specific timestamps with automatic stamp validation

### Changed
- **Simplified rollback API**: Replaced complex `rollback_stamp(stamp)` with streamlined [`rollback()` method](https://github.com/seqdb/seqdb/blob/v0.2.2/crates/vecdb/src/traits/generic.rs#L453-L459) in Generic trait that automatically uses the current vector's stamp for easier usage and reduced API surface
- **Enhanced rollback example demonstrations**: Completely updated [raw example](https://github.com/seqdb/seqdb/blob/v0.2.2/crates/vecdb/examples/raw.rs) to showcase the new simplified rollback API with comprehensive scenarios including multi-step rollback operations and complex state management

### Technical Implementation
- **Intelligent stamp-based rollback**: The `rollback_before(stamp)` method implements sophisticated directory traversal logic that:
  - Scans the changes directory for all available stamp files
  - Creates a ordered map of stamps to file paths using `BTreeMap<Stamp, PathBuf>`
  - Iterates backwards through stamps using `range(..=self.stamp()).next_back()`
  - Validates stamp consistency with current vector state before each rollback operation
  - Returns the final stamp reached after rollback completion
- **Simplified rollback operation**: The new `rollback()` method eliminates the need to specify stamps by automatically reading the change file corresponding to the current vector's stamp, making rollback operations more intuitive and less error-prone
- **Robust error handling**: Enhanced stamp validation ensures that change files match expected vector stamps before performing rollback operations, preventing data corruption from mismatched state files

### Breaking Changes
- **Rollback method signature**: Changed from `rollback_stamp(stamp: Stamp) -> Result<()>` to `rollback() -> Result<()>` for the simple rollback case
- **Enhanced rollback return type**: `rollback_before()` now returns `Result<Stamp>` instead of `Result<()>`, providing feedback on the final stamp state after rollback

### Dependencies
- Updated all workspace package versions from 0.2.1 to 0.2.2 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.2/crates/vecdb/src/traits/generic.rs#L425-L459): Simplified rollback API and added rollback_before functionality
- [crates/vecdb/examples/raw.rs](https://github.com/seqdb/seqdb/blob/v0.2.2/crates/vecdb/examples/raw.rs): Updated examples to demonstrate new rollback API patterns

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.1...v0.2.2)

## [v0.2.1](https://github.com/seqdb/seqdb/releases/tag/v0.2.1) - 2025-08-18

### Added
- **FreeBSD platform support**: Added [`punch_hole2()` function](https://github.com/seqdb/seqdb/blob/v0.2.1/crates/seqdb/src/lib.rs#L625-L650) for FreeBSD hole punching compatibility using `fspacectl` system call, extending cross-platform storage optimization support
- **Comprehensive documentation overhaul**: Complete rewrite of README files for both seqdb and vecdb crates with practical, production-ready examples and clear architectural explanations:
  - **seqdb README**: Transformed from technical architecture focus to K.I.S.S. (Keep It Simple, Stupid) approach with concrete usage examples, core type explanations, and storage model documentation
  - **vecdb README**: Enhanced with detailed storage variant explanations, comprehensive code samples for all vector types, and practical usage patterns for different performance requirements
- **Enhanced development planning**: Expanded TODO.md with additional feature requests including compression algorithm diversification (lz4, zstd support) and performance optimization strategies
- **AI tooling integration**: Updated `.gitignore` to include `.claude` directory for development workflow improvements

### Changed
- **Documentation philosophy**: Shifted from technical implementation details to user-focused explanations emphasizing practical benefits and use cases
- **Project development priorities**: Reorganized TODO.md structure moving mmap optimization strategies from seqdb-specific to vecdb-general section, reflecting broader applicability
- **Developer experience improvements**: Enhanced README examples with more realistic scenarios and clearer API usage patterns

### Technical Implementation
- **FreeBSD system integration**: Implemented `spacectl_range` structure usage with proper `fspacectl` system call handling for platform-specific hole punching operations
- **Cross-platform storage optimization**: Extended hole punching support to FreeBSD alongside existing Linux and macOS implementations
- **Documentation architecture**: Restructured README files to follow progressive disclosure principle - starting with simple concepts and building to advanced usage patterns

### Dependencies
- Updated all workspace package versions from 0.2.0 to 0.2.1 across seqdb, vecdb, and vecdb_derive crates
- Maintained external dependency stability while updating internal version references

### Files Modified
- [crates/seqdb/src/lib.rs](https://github.com/seqdb/seqdb/blob/v0.2.1/crates/seqdb/src/lib.rs#L625-L650): Added FreeBSD hole punching support
- [crates/seqdb/README.md](https://github.com/seqdb/seqdb/blob/v0.2.1/crates/seqdb/README.md): Complete documentation rewrite with K.I.S.S. approach
- [crates/vecdb/README.md](https://github.com/seqdb/seqdb/blob/v0.2.1/crates/vecdb/README.md): Comprehensive documentation overhaul with practical examples
- [TODO.md](https://github.com/seqdb/seqdb/blob/v0.2.1/TODO.md): Enhanced project planning and feature roadmap
- [.gitignore](https://github.com/seqdb/seqdb/blob/v0.2.1/.gitignore): Added AI tooling directory exclusion

[View changes](https://github.com/seqdb/seqdb/compare/v0.2.0...v0.2.1)

## [v0.2.0](https://github.com/seqdb/seqdb/releases/tag/v0.2.0) - 2025-08-16

### Added
- **Complete rollback and change tracking system**: Implemented comprehensive rollback functionality with [`stamped_flush()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/stored.rs#L38) in Stored trait, enabling time-travel capabilities for vectors with automatic change file management and cleanup
- **Advanced change serialization**: Added [`serialize_changes()` and `saved_stamped_changes()` methods](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/stored.rs#L19) in Stored trait to support persistent rollback functionality with efficient binary serialization of vector state changes
- **ImportOptions configuration system**: Implemented flexible import options architecture allowing vectors to be imported with customizable parameters including saved change history depth
- **Enhanced Generic trait methods**: Added [`unwrap_read_()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs#L57) and refactored [`update_()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs#L227) for improved low-level data access and manipulation
- **Sophisticated rollback deserialization**: Implemented [`deserialize_then_undo_changes()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs#L301) with complex binary format handling for restoring vector state from serialized changes
- **Advanced data collection methods**: Added [`collect_holed()` and `collect_holed_range()` methods](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs#L367) for extracting data with explicit hole representation, crucial for debugging and state inspection
- **Database path access**: Added [`path()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/seqdb/src/lib.rs#L632) to Database for accessing the underlying file path, enabling change file management
- **Enhanced Stamp trait**: Added comprehensive trait implementations including `FromBytes`, `IntoBytes`, and `Immutable` for efficient serialization and zero-copy operations

### Changed
- **Major API modernization**: Transitioned from `forced_import()` to [`forced_import_with(options)` pattern](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/examples/compressed.rs#L18) across all vector variants, providing flexible configuration through ImportOptions
- **Improved truncation validation**: Enhanced [`truncate_if_needed_()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs#L276) with more precise state checking - replaced generic checks with specific validation for bad holes (`has_bad_hole`) and bad updates (`has_bad_update`) that would be affected by truncation
- **Enhanced change tracking path management**: Added [`changes_path()` method](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/stored.rs#L41) to Stored trait for consistent change file location management across all vector variants
- **Sophisticated example demonstrations**: Completely overhauled examples to showcase the new rollback functionality with complex scenarios including truncation, updates, holes, and multi-stamp rollback operations
- **Type system improvements**: Enhanced CollectableVec trait with stricter Clone constraint for better type safety and consistency across the codebase

### Breaking Changes
- **API method signatures**: All vector imports now require ImportOptions instead of direct parameters, changing from `forced_import(&database, "name", version)` to `forced_import_with(options)`
- **Enhanced update method**: Split update functionality into `update()` and `update_()` methods for consistent index handling patterns

### Technical Implementation
- **Binary change serialization format**: Complex binary format for change persistence including stored length, truncated data, holes representation, and modified value mappings with efficient zerocopy deserialization
- **Intelligent file cleanup**: Automated cleanup of outdated change files during stamped flush operations, maintaining only the specified number of saved changes while removing newer conflicting changes
- **Coordinated state management**: Sophisticated coordination between holes, updates, and stored data during rollback operations ensuring data consistency and integrity
- **Memory-efficient operations**: Leveraged zerocopy patterns for efficient serialization/deserialization of stamps and data structures

### Dependencies
- **External dependency updates**: Updated rayon from 1.10.0 to 1.11.0, proc-macro2 from 1.0.96 to 1.0.97, syn from 2.0.104 to 2.0.106, and rayon-core from 1.12.1 to 1.13.0
- Updated all workspace package versions from 0.1.2 to 0.2.0 across seqdb, vecdb, and vecdb_derive crates
- Refreshed Cargo.lock with updated version dependencies

### Files Modified
- [crates/vecdb/src/traits/stored.rs](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/stored.rs): Complete rollback and change tracking implementation
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/src/traits/generic.rs): Enhanced methods and rollback deserialization
- [crates/vecdb/examples/raw.rs](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/examples/raw.rs): Comprehensive rollback demonstration
- [crates/vecdb/examples/compressed.rs](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/vecdb/examples/compressed.rs): Updated to use ImportOptions
- [crates/seqdb/src/lib.rs](https://github.com/seqdb/seqdb/blob/v0.2.0/crates/seqdb/src/lib.rs): Added database path access method

[View changes](https://github.com/seqdb/seqdb/compare/v0.1.2...v0.2.0)

## [v0.1.2](https://github.com/seqdb/seqdb/releases/tag/v0.1.2) - 2025-08-13

### Added
- **Advanced dual-input transformation method**: Added [`compute_transform2()` method](https://github.com/seqdb/seqdb/blob/v0.1.2/crates/vecdb/src/variants/eager.rs#L154) in EagerVec for sophisticated transformations involving two input vectors simultaneously
- **Multi-vector computational support**: Enhanced analytical capabilities by enabling transformations that can process data from two different vectors alongside the current vector's state

### Technical Implementation
- **Complex transformation function signature**: The `compute_transform2()` method accepts a closure with signature `FnMut((A, B, C, &Self)) -> (I, T)` where:
  - `A` is the shared index type across vectors
  - `B` and `C` are the data types from the two input vectors
  - `&Self` provides access to the current eager vector's state
  - Returns tuple `(I, T)` for target index and transformed value
- **Version-based computation validation**: Implements sophisticated version tracking using `Version::ZERO + self.inner_version() + other1.version() + other2.version()` to ensure computational consistency across all involved vectors
- **Intelligent iteration coordination**: Synchronizes iteration across multiple vectors using `iter_at(index)` with coordinated advancement, ensuring data alignment and proper handling of vector boundaries
- **Generic constraint system**: Enforces type safety through comprehensive generic bounds ensuring `A: StoredIndex`, `B: StoredRaw`, `C: StoredRaw` for robust type checking at compile time
- **Safe memory access patterns**: Uses `unwrap_get_inner(a)` and `into_owned()` for efficient and safe data access across the involved vectors during transformation

### Performance Characteristics
- **Optimized dual-vector processing**: Minimal overhead for coordinating iteration across two input vectors while maintaining memory safety
- **Efficient version tracking**: Additive version computation provides fast change detection across multiple data sources
- **Lazy evaluation support**: Transformation is only applied when explicitly requested, allowing for efficient pipeline construction

### Dependencies
- Updated all workspace package versions from 0.1.1 to 0.1.2 across seqdb, vecdb, and vecdb_derive crates
- Refreshed Cargo.lock with updated version dependencies

### Files Modified
- [crates/vecdb/src/variants/eager.rs](https://github.com/seqdb/seqdb/blob/v0.1.2/crates/vecdb/src/variants/eager.rs#L154-L180): Added compute_transform2() method for dual-input transformations

[View changes](https://github.com/seqdb/seqdb/compare/v0.1.1...v0.1.2)

## [v0.1.1](https://github.com/seqdb/seqdb/releases/tag/v0.1.1) - 2025-08-11

### Added
- **Rust version constraint**: Added `rust-version = "1.89"` specification to workspace configuration, ensuring compatibility requirements are clearly defined and enforced across all crates
- **Enhanced development planning**: Expanded TODO.md with more detailed and structured development priorities, including improved task descriptions and new feature requests such as import options functionality

### Changed
- **Major dependency architecture refactoring**: Completely restructured workspace dependency management by moving from centralized workspace dependencies to individual crate-level dependency specifications, providing more granular control and clearer dependency relationships
- **Simplified workspace configuration**: Removed extensive centralized dependency list from workspace root, keeping only essential cross-crate references (seqdb, vecdb, vecdb_derive) while moving specific dependencies directly into individual crate manifests
- **Improved TODO organization**: Enhanced project planning documentation with better formatting, clearer task categorization, and more specific implementation details including durability improvements and mmap optimization strategies

### Technical Implementation
- **Individual crate dependency management**: Each crate now manages its own dependencies directly:
  - **seqdb**: Manages libc 0.2.175, memmap2 0.9.7, and other core storage dependencies locally
  - **vecdb**: Handles ctrlc, pco 0.4.6, serde ecosystem, and compression dependencies individually
  - **vecdb_derive**: Maintains its own procedural macro dependencies
- **Rust toolchain specification**: Added minimum supported Rust version (1.89) to ensure compatibility across development environments and CI/CD pipelines
- **Cleaner project structure**: Reduced workspace configuration complexity while maintaining cross-crate version consistency through workspace references for internal packages

### Dependencies
- **External dependency updates**: Updated libc from 0.2.174 to 0.2.175, and proc-macro2 from 1.0.95 to 1.0.96
- **Dependency architecture change**: Transitioned from workspace-centralized to crate-individual dependency management for better maintainability
- Updated all internal package versions from 0.1.0 to 0.1.1 across seqdb, vecdb, and vecdb_derive

### Files Modified
- [Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.1.1/Cargo.toml): Major workspace dependency architecture refactoring and added rust-version constraint
- [crates/seqdb/Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.1.1/crates/seqdb/Cargo.toml): Individual dependency management and rust-version specification
- [crates/vecdb/Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.1.1/crates/vecdb/Cargo.toml): Local dependency specifications and rust-version constraint
- [crates/vecdb_derive/Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.1.1/crates/vecdb_derive/Cargo.toml): Added rust-version specification
- [TODO.md](https://github.com/seqdb/seqdb/blob/v0.1.1/TODO.md): Enhanced project planning with detailed task descriptions

[View changes](https://github.com/seqdb/seqdb/compare/v0.1.0...v0.1.1)

## [v0.1.0](https://github.com/seqdb/seqdb/releases/tag/v0.1.0) - 2025-08-10

### Added
- **Enhanced module exports**: Extended vecdb library exports to include critical seqdb types - added `Error as SeqDBError`, `PAGE_SIZE`, and `Reader` to the public API, providing better integration between the storage engine and vector database layers
- **Development roadmap expansion**: Added new development priorities to TODO.md including region identifier removal and region index storage optimization for improved performance

### Changed
- **Improved error handling in Generic trait**: Enhanced the `truncate_if_needed_()` method with more granular condition checking, separating validation logic into distinct checks for new data (`has_new_data`), holes (`has_holes`), and updates (`has_updated`) for better code readability and maintainability
- **Cleaner API surface**: Removed `pco::data_types::LatentType` from the main vecdb export list, simplifying the public interface and reducing API surface complexity
- **Simplified documentation**: Streamlined module documentation structure by removing an unnecessary line break in the crate documentation

### Technical Implementation
- **Better state validation**: The truncation logic now uses three separate boolean variables to check different aspects of vector state, making the validation process more explicit and easier to debug
- **Module organization**: Improved separation of concerns between seqdb and vecdb by making essential seqdb types directly available through vecdb's public interface

### Dependencies
- Updated all workspace package versions from 0.0.2 to 0.1.0 across seqdb, vecdb, and vecdb_derive crates
- Refreshed Cargo.lock with updated version dependencies

### Files Modified
- [crates/vecdb/src/lib.rs](https://github.com/seqdb/seqdb/blob/v0.1.0/crates/vecdb/src/lib.rs): Enhanced module exports and API surface
- [crates/vecdb/src/traits/generic.rs](https://github.com/seqdb/seqdb/blob/v0.1.0/crates/vecdb/src/traits/generic.rs): Improved truncation validation logic
- [TODO.md](https://github.com/seqdb/seqdb/blob/v0.1.0/TODO.md): Added development priorities

[View changes](https://github.com/seqdb/seqdb/compare/v0.0.2...v0.1.0)

## [v0.0.2](https://github.com/seqdb/seqdb/releases/tag/v0.0.2) - 2025-08-09

### Added
- **Complete project foundation**: Established the core seqdb database engine as a high-performance, memory-mapped sequential storage system for analytical workloads and columnar data storage
- **Comprehensive documentation suite**: Added extensive README files for both root project and seqdb crate, detailing architecture, usage patterns, and performance characteristics
- **SeqDB core engine**: Created the foundational storage engine with memory-mapped file management, dynamic region allocation with automatic growth and compaction, hole punching for space reclamation, page-aligned operations, and thread-safe concurrent access
- **VecDB vector database**: Implemented high-level columnar storage with vector abstractions, supporting both raw (optimized for speed) and compressed (optimized for space) storage formats, advanced compression using pco (Pcodec), type-safe generics, iterator patterns, and versioning system for schema evolution
- **Derive macro system**: Added vecdb_derive crate providing procedural macros for automatic trait implementations and transparent compression support
- **Multi-variant architecture**: Implemented complete storage variant system including raw vectors, compressed vectors, computed vectors, eager vectors, stamped vectors, and stored vectors with their respective trait implementations
- **Project infrastructure**: Established Rust 2024 edition workspace configuration with comprehensive dependency management, development tools setup, and build system configuration
- **Example applications**: Created detailed usage examples demonstrating database operations, region management, memory mapping, data persistence, and error handling patterns
- **Development toolkit**: Added TODO.md for project planning, comprehensive .gitignore configuration, and development workflow setup

### Breaking Changes
- **API naming**: Renamed primary database type from `SeqDB` to `Database` across all APIs and examples for better clarity and consistency
- **Example reorganization**: Renamed `seqdb.rs` example to `db.rs` to better reflect the updated API naming conventions

### Technical Implementation
- **Memory-mapped I/O**: Zero-copy data access through memory-mapped files with automatic region management and space optimization
- **Dynamic region system**: Variable-size data containers with automatic growth, compaction, and hole punching for efficient disk space utilization
- **Concurrent architecture**: Thread-safe design using parking_lot for fine-grained locking and optimal concurrent access patterns
- **Cross-platform support**: Primary support for Unix-like systems (Linux, macOS, BSD) on x86_64 and ARM64 architectures
- **Performance optimization**: Page-aligned operations, reserved space management, and filesystem-optimized I/O patterns for analytical workload performance

### Dependencies
- **Core storage**: seqdb engine with libc integration for low-level operations
- **Synchronization**: parking_lot for efficient thread-safe concurrent access
- **Compression**: pco (Pcodec) for advanced numerical data compression
- **Serialization**: serde ecosystem with JSON support and byte handling
- **Zero-copy operations**: zerocopy and zerocopy-derive for memory-efficient data handling
- **Parallel processing**: rayon for parallel computation support
- **Development tools**: Complete workspace setup with cross-crate dependency management

### Files Modified
- [Cargo.toml](https://github.com/seqdb/seqdb/blob/v0.0.2/Cargo.toml): Established workspace configuration and dependency management
- [README.md](https://github.com/seqdb/seqdb/blob/v0.0.2/README.md): Created comprehensive project documentation
- [crates/seqdb/](https://github.com/seqdb/seqdb/blob/v0.0.2/crates/seqdb/): Complete seqdb crate implementation
- [crates/seqdb/examples/db.rs](https://github.com/seqdb/seqdb/blob/v0.0.2/crates/seqdb/examples/db.rs): Database usage demonstration
